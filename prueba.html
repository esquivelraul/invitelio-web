<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Invitación</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8f8f8; color: #333; margin: 0; padding: 0; }
    .container { max-width: 800px; margin: auto; background: #fff; padding: 20px; }
    h1, h2, h3, h4 { text-align: center; }
    .section { margin: 20px 0; }
    .info { margin-bottom: 10px; }
    .btn { display: inline-block; background: #007BFF; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; }
    .hero { text-align: center; margin-bottom: 30px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="hero">
      <h1>{{event_title}}</h1>
      <h2>{{event_date}}</h2>
      <div id="countdown">
        <span>Días</span> <span>Horas</span> <span>Minutos</span> <span>Segundos</span>
      </div>
    </div>
    
    <div class="section">
      <h3>Datos del invitado</h3>
      <p class="info"><strong>Nombre:</strong> {{fname}}</p>
      <p class="info"><strong>Apellido:</strong> {{lname}}</p>
      <p class="info"><strong>Boletos:</strong> {{boletos}}</p>
    </div>
    
    <div class="section">
      <h3>¿Dónde y cuándo?</h3>
      <p class="info"><strong>Ceremonia:</strong> {{ceremonia_time}} – {{ceremonia_address}} <a href="{{ceremonia_map}}" class="btn">Cómo llegar</a></p>
      <p class="info"><strong>Recepción:</strong> {{recepcion_time}} – {{recepcion_address}} <a href="{{recepcion_map}}" class="btn">Cómo llegar</a></p>
      <p><a href="{{calendar_link}}" class="btn">Añadir al calendario</a></p>
    </div>
    
    <div class="section">
      <h3>Itinerario</h3>
      <ul>
        {{#each itinerary}}
          <li><strong>{{time}}:</strong> {{activity}}</li>
        {{/each}}
      </ul>
    </div>
    
    <div class="section">
      <h3>Mesa de regalos</h3>
      <p><a href="{{gift_registry_link}}" class="btn">Ver Mesa</a></p>
    </div>
    
    <div class="section">
      <h3>Opciones de hospedaje</h3>
      {{#each hotels}}
        <div class="info">
          <p><strong>{{name}}</strong><br>
          {{address}}<br>
          Tel: {{phone}}<br>
          <a href="{{map_link}}" class="btn">Ver mapa</a></p>
        </div>
      {{/each}}
    </div>
    
    <div class="section">
      <h3>Confirmar asistencia</h3>
      <form action="{{rsvp_action}}" method="post">
        <input type="text" name="fname" placeholder="Nombre" required>
        <input type="text" name="lname" placeholder="Apellido" required>
        <input type="email" name="email" placeholder="Email" required><br><br>
        <label>
          <input type="radio" name="rsvp" value="Si" required> Sí
        </label>
        <label>
          <input type="radio" name="rsvp" value="No"> No
        </label><br><br>
        <button type="submit" class="btn">Enviar</button>
      </form>
      <p>o confirma vía WhatsApp: <a href="{{whatsapp_link}}" class="btn">Confirmar</a></p>
    </div>

    <div class="section">
      <h3>Comparte</h3>
      <p>Usa nuestro hashtag: <strong>{{hashtag}}</strong></p>
    </div>
  </div>

  <script>
    // Ejemplo simple de cuenta regresiva
    function startCountdown(eventDate) {
      const target = new Date(eventDate).getTime();
      const daysEl = document.querySelector('#countdown span:nth-child(1)');
      const hoursEl = document.querySelector('#countdown span:nth-child(2)');
      const minsEl = document.querySelector('#countdown span:nth-child(3)');
      const secsEl = document.querySelector('#countdown span:nth-child(4)');
      const interval = setInterval(() => {
        const now = new Date().getTime();
        const diff = target - now;
        if (diff <= 0) {
          clearInterval(interval);
          daysEl.textContent = '0';
          hoursEl.textContent = '0';
          minsEl.textContent = '0';
          secsEl.textContent = '0';
          return;
        }
        daysEl.textContent = Math.floor(diff / (1000*60*60*24));
        hoursEl.textContent = Math.floor((diff / (1000*60*60)) % 24);
        minsEl.textContent = Math.floor((diff / (1000*60)) % 60);
        secsEl.textContent = Math.floor((diff / 1000) % 60);
      }, 1000);
    }
    // Inicia la cuenta regresiva usando {{event_date_iso}}
    // startCountdown('{{event_date_iso}}');
  </script>
</body>
</html>
